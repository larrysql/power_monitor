<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <link rel="stylesheet" type="text/css" href="../static/Styles/admin-all.css" />
    <link rel="stylesheet" type="text/css" href="../static/Styles/base.css"/>
    <script type="text/javascript" src="../static/Scripts/jquery-1.7.2.js"></script>
    <script type="text/javascript" src="../static/Scripts/jquery-ui-1.8.22.custom.min.js"></script>
    <script type="text/javascript" src="../static/Scripts/highcharts.js"></script>
	<script type="text/javascript" src="../static/Scripts/chartkick.js"></script>
    <script type="text/javascript" src="../static/Scripts/laydate.js"></script>
	<!--<script type="text/javascript" src="../static/Scripts/tab_list.js"></script>-->
    <link rel="stylesheet" type="text/css" href="../static/Styles/ui-lightness/jquery-ui-1.8.22.custom.css" />
    <link rel="stylesheet" type="text/css" href="../static/Styles/formui.css"/>
    <link rel="stylesheet" type="text/css" href="../static/Styles/tab_list.css"/>
    <link rel="stylesheet" type="text/css" href="../static/Styles/tab_list2.css"/>
    <script type="text/javascript">
        function json_data(stat_name){
                        var data_graph;
                        $.ajax({
                            url: "/ora_load_json_init",
                            data:"id={{inst_id}}&stat_name='" + stat_name +"'&period={{period}}",
                            type: "GET",
                            async: false,
                            success: function (data) {
                               data_graph = data;
                            }
                        });
                        return data_graph;
                    }
            var jd = eval(json_data('redo_size'));
            //alert(eval(eval(json_data('session_logical_reads'))))
            var inst_id = {{inst_id}}
            //alert('id='+inst_id);
//======================================redo size=================================================================
        $(function() {
            Highcharts.setOptions({
            lang: {
                numericSymbols: null
                },
            global: { useUTC: false }
            });
			$('#redo').highcharts({
                    chart: {
                        type: 'spline',
                        marginRight: 10,
                        marginLeft: 80,
                        marginBottom: 50,
                        animation: Highcharts.svg,
                        events: {
                            load: function() {
                                var series_redo = this.series[0];
                                setInterval(function() {
                                    jQuery.getJSON('/ora_load_json',"id="+inst_id+"&stat_name='redo_size'",
                                    function(data) {
                                        // x轴数据 redo
                                        var snap_time = data[0];
                                        // y轴数据
                                        var value = data[1];
                                        // 更新曲线数据
                                        series_redo.addPoint([snap_time, value], true, true);
                                    });
                                },
                                10 * 1000/*启动间隔，单位ms*/
                                );
                            }
                        }
                    },
                    title: {
                        text: 'REDO日志',
                        x: -20
                    },
                    xAxis: {
                        type: 'datetime',
                        tickInterval : {{tick}}*3600*1000,
						labels: {step: 4,overflow:'justify'},
                        type: 'datetime',
                        tickWidth:1,//刻度的宽度
                        lineColor:'#990000',//自定义刻度颜色
                        lineWidth:1,//自定义x轴宽度
                        gridLineWidth:1,//默认是0，即在图上没有纵轴间隔线
                        dateTimeLabelFormats: {
                        second: '%H:%M:%S',
					    minute: '%e. %b %H:%M',
					    hour: '%b/%e %H:%M',
					    day: '%e日/%b',
					    week: '%e. %b',
					    month: '%b %y',
					    year: '%Y'
                            }
                    },
                    yAxis: {
                        title: {
                            text: 'redo size'
                        },
                        plotLines: [{
                            value: 0,
                            width: 1,
                            color: '#990000'
                        }],
                        lineWidth:1,
                        lineColor:'#990000',
                        min:0,
                        startOnTick: false
                    },
                    legend: {
                        align:'center',
                        verticalAlign:'top',
                        x: 100,
                        y: 0,
                    },
                    credits: {
                        enabled: false
                    },
                    series: [
                    // 第1条曲线的(name, data)对
                    {
                        name: 'redo size/s',
                        data:eval(eval(json_data('redo_size')))
                    }
                    ]
                });
            });
//======================================logical reads=================================================================
        $(function() {
                $('#lio').highcharts({
                    chart: {
                        type: 'spline',
                        marginRight: 10,
                        marginLeft: 80,
                        marginBottom: 50,
                        animation: Highcharts.svg,

                        events: {
                            load: function() {
                                var series_lio = this.series[0];
                                setInterval(function() {
                                    jQuery.getJSON('/ora_load_json',"id="+inst_id+"&stat_name='session_logical_reads'",
                                    function(data) {
                                        // x轴数据 redo
                                        var snap_time = data[0];
                                        // y轴数据
                                        var value = data[1];
                                        // 更新曲线数据
                                        series_lio.addPoint([snap_time, value], true, true);
                                    });
                                },
                                10 * 1000/*启动间隔，单位ms*/
                                );
                            }
                        }
                    },
                    title: {
                        text: '逻辑读',
                        x: -20
                    },
                    xAxis: {
                        type: 'datetime',
                        tickInterval : {{tick}}*3600*1000,
						labels: {step: 4,overflow:'justify'},
                        type: 'datetime',
                        tickWidth:1,//刻度的宽度
                        lineColor:'#990000',//自定义刻度颜色
                        lineWidth:1,//自定义x轴宽度
                        gridLineWidth:1,//默认是0，即在图上没有纵轴间隔线
                        dateTimeLabelFormats: {
                        second: '%H:%M:%S',
					    minute: '%e. %b %H:%M',
					    hour: '%b/%e %H:%M',
					    day: '%e日/%b',
					    week: '%e. %b',
					    month: '%b %y',
					    year: '%Y'
                            }
                    },
                    yAxis: {
                        title: {
                            text: 'logical reads'
                        },
                        plotLines: [{
                            value: 0,
                            width: 1,
                            color: '#990000'
                        }],
                        lineWidth:1,
                        lineColor:'#990000',
                        min:0,
                        startOnTick: false
                    },
                    legend: {
                        align:'center',
                        verticalAlign:'top',
                        x: 100,
                        y: 0,
                    },
                    credits: {
                        enabled: false
                    },
                    series: [
                    // 第1条曲线的(name, data)对
                    {
                        name: 'logical reads/s',
                        data:eval(eval(json_data('session_logical_reads')))
				//		data: (function () {
				//		// generate an array of random data
				//		var data = [],
				//			time = (new Date()).getTime(),
				//			i;
                //
				//		for (i = -1900; i <= 0; i += 100) {
				//			data.push({
				//				x: time + i * 1000,
				//				y: Math.random()
				//			});
				//		}
                //    return data;
                //}())
                    }
                    ]
                });
            });
//========================================================execute count=====================================================================
        $(function() {
                $('#exec').highcharts({
                    chart: {
                        type: 'spline',
                        marginRight: 10,
                        marginLeft: 80,
                        marginBottom: 50,
                        animation: Highcharts.svg,

                        events: {
                            load: function() {
                                var series_lio = this.series[0];
                                setInterval(function() {
                                    jQuery.getJSON('/ora_load_json',"id="+inst_id+"&stat_name='execute_count'",
                                    function(data) {
                                        // x轴数据 redo
                                        var snap_time = data[0];
                                        // y轴数据
                                        var value = data[1];
                                        // 更新曲线数据
                                        series_lio.addPoint([snap_time, value], true, true);
                                    });
                                },
                                10 * 1000/*启动间隔，单位ms*/
                                );
                            }
                        }
                    },
                    title: {
                        text: '执行次数',
                        x: -20
                    },
                    xAxis: {
                        type: 'datetime',
                        tickInterval : {{tick}}*3600*1000,
                        labels: {step: 4,overflow:'justify'},
                        type: 'datetime',
                        tickWidth:1,//刻度的宽度
                        lineColor:'#990000',//自定义刻度颜色
                        lineWidth:1,//自定义x轴宽度
                        gridLineWidth:1,//默认是0，即在图上没有纵轴间隔线
                        dateTimeLabelFormats: {
                        second: '%H:%M:%S',
					    minute: '%e. %b %H:%M',
					    hour: '%b/%e %H:%M',
					    day: '%e日/%b',
					    week: '%e. %b',
					    month: '%b %y',
					    year: '%Y'
                            }
                    },
                    yAxis: {
                        title: {
                            text: 'execute count'
                        },
                        plotLines: [{
                            value: 0,
                            width: 1,
                            color: '#990000'
                        }],
                        lineWidth:1,
                        lineColor:'#990000',
                        min:0
                    },
                    legend: {
                        align:'center',
                        verticalAlign:'top',
                        x: 100,
                        y: 0,
                    },
                    credits: {
                        enabled: false
                    },
                    series: [
                    // 第1条曲线的(name, data)对
                    {
                        name: 'execute count/s',
                        data:eval(eval(json_data('execute_count')))
                    }
                    ]
                });
            });
//=======================================================physical reads=====================================================================
        $(function() {
                $('#pio').highcharts({
                    chart: {
                        type: 'spline',
                        marginRight: 10,
                        marginLeft: 80,
                        marginBottom: 50,
                        animation: Highcharts.svg,

                        events: {
                            load: function() {
                                var series_pio = this.series[0];
                                setInterval(function() {
                                    jQuery.getJSON('/ora_load_json',"id="+inst_id+"&stat_name='physical_reads'",
                                    function(data) {
                                        // x轴数据 redo
                                        var snap_time = data[0];
                                        // y轴数据
                                        var value = data[1];
                                        // 更新曲线数据
                                        series_pio.addPoint([snap_time, value], true, true);
                                    });
                                },
                                10 * 1000/*启动间隔，单位ms*/
                                );
                            }
                        }
                    },
                    title: {
                        text: '物理读',
                        x: -20
                    },
                    xAxis: {
                        type: 'datetime',
                        tickInterval : {{tick}}*3600*1000,
                        labels: {step: 4,overflow:'justify'},
                        type: 'datetime',
                        tickWidth:1,//刻度的宽度
                        lineColor:'#990000',//自定义刻度颜色
                        lineWidth:1,//自定义x轴宽度
                        gridLineWidth:1,//默认是0，即在图上没有纵轴间隔线
                        dateTimeLabelFormats: {
                        second: '%H:%M:%S',
					    minute: '%e. %b %H:%M',
					    hour: '%b/%e %H:%M',
					    day: '%e日/%b',
					    week: '%e. %b',
					    month: '%b %y',
					    year: '%Y'
                            }
                    },
                    yAxis: {
                        title: {
                            text: 'physical reads'
                        },
                        plotLines: [{
                            value: 0,
                            width: 1,
                            color: '#990000'
                        }],
                        lineWidth:1,
                        lineColor:'#990000',
                        min:0
                    },
                    legend: {
                        align:'center',
                        verticalAlign:'top',
                        x: 100,
                        y: 0,
                    },
                    credits: {
                        enabled: false
                    },
                    series: [
                    // 第1条曲线的(name, data)对
                    {
                        name: 'physical reads/s',
                        data:eval(eval(json_data('physical_reads')))
                    }
                    ]
                });
            });
//===============================================physical_writes=============================================================================
        $(function() {
                $('#pwr').highcharts({
                    chart: {
                        type: 'spline',
                        marginRight: 10,
                        marginLeft: 80,
                        marginBottom: 50,
                        animation: Highcharts.svg,

                        events: {
                            load: function() {
                                var series_pwr = this.series[0];
                                setInterval(function() {
                                    jQuery.getJSON('/ora_load_json',"id="+inst_id+"&stat_name='physical_writes'",
                                    function(data) {
                                        // x轴数据 redo
                                        var snap_time = data[0];
                                        // y轴数据
                                        var value = data[1];
                                        // 更新曲线数据
                                        series_pwr.addPoint([snap_time, value], true, true);
                                    });
                                },
                                10 * 1000/*启动间隔，单位ms*/
                                );
                            }
                        }
                    },
                    title: {
                        text: '物理写',
                        x: -20
                    },
                    xAxis: {
                        type: 'datetime',
                        tickInterval : {{tick}}*3600*1000,
                        labels: {step: 4,overflow:'justify'},
                        type: 'datetime',
                        tickWidth:1,//刻度的宽度
                        lineColor:'#990000',//自定义刻度颜色
                        lineWidth:1,//自定义x轴宽度
                        gridLineWidth:1,//默认是0，即在图上没有纵轴间隔线
                        dateTimeLabelFormats: {
                        second: '%H:%M:%S',
					    minute: '%e. %b %H:%M',
					    hour: '%b/%e %H:%M',
					    day: '%e日/%b',
					    week: '%e. %b',
					    month: '%b %y',
					    year: '%Y'
                            }
                    },
                    yAxis: {
                        title: {
                            text: 'physical writes'
                        },
                        plotLines: [{
                            value: 0,
                            width: 1,
                            color: '#990000'
                        }],
                        lineWidth:1,
                        lineColor:'#990000',
                        min:0
                    },
                    legend: {
                        align:'center',
                        verticalAlign:'top',
                        x: 100,
                        y: 0,
                    },
                    credits: {
                        enabled: false
                    },
                    series: [
                    // 第1条曲线的(name, data)对
                    {
                        name: 'physical writes/s',
                        data:eval(eval(json_data('physical_writes')))
                    }
                    ]
                });
            });
//===================================================parse==================================================================================
        $(function() {
                $('#parse').highcharts({
                    chart: {
                        type: 'spline',
                        marginRight: 10,
                        marginLeft: 80,
                        marginBottom: 50,
                        animation: Highcharts.svg,

                        events: {
                            load: function() {
                                var series_parse = this.series[0];
                                setInterval(function() {
                                    jQuery.getJSON('/ora_load_json',"id="+inst_id+"&stat_name='parse_count_total'",
                                    function(data) {
                                        // x轴数据 redo
                                        var snap_time = data[0];
                                        // y轴数据
                                        var value = data[1];
                                        // 更新曲线数据
                                        series_parse.addPoint([snap_time, value], true, true);
                                    });
                                },
                                10 * 1000/*启动间隔，单位ms*/
                                );
                            }
                        }
                    },
                    title: {
                        text: '解析次数',
                        x: -20
                    },
                    xAxis: {
                        type: 'datetime',
                        tickInterval : {{tick}}*3600*1000,
                        labels: {step: 4,overflow:'justify'},
                        type: 'datetime',
                        tickWidth:1,//刻度的宽度
                        lineColor:'#990000',//自定义刻度颜色
                        lineWidth:1,//自定义x轴宽度
                        gridLineWidth:1,//默认是0，即在图上没有纵轴间隔线
                        dateTimeLabelFormats: {
                        second: '%H:%M:%S',
					    minute: '%e. %b %H:%M',
					    hour: '%b/%e %H:%M',
					    day: '%e日/%b',
					    week: '%e. %b',
					    month: '%b %y',
					    year: '%Y'
                            }
                    },
                    yAxis: {
                        title: {
                            text: 'parse'
                        },
                        plotLines: [{
                            value: 0,
                            width: 1,
                            color: '#990000'
                        }],
                        lineWidth:1,
                        lineColor:'#990000',
                        min:0
                    },
                    legend: {
                        align:'center',
                        verticalAlign:'top',
                        x: 100,
                        y: 0,
                    },
                    credits: {
                        enabled: false
                    },
                    series: [
                    // 第1条曲线的(name, data)对
                    {
                        name: 'parse/s',
                        data:eval(eval(json_data('parse_count_total')))
                    }
                    ]
                });
            });
//===================================================buffer hit ratio=======================================
        $(function() {
                $('#buff_hit_ratio').highcharts({
                    chart: {
                        type: 'spline',
                        marginRight: 10,
                        marginLeft: 80,
                        marginBottom: 50,
                        animation: Highcharts.svg,

                        events: {
                            load: function() {
                                var series_parse = this.series[0];
                                setInterval(function() {
                                    jQuery.getJSON('/ora_load_json',"id="+inst_id+"&stat_name='buff_hit_ratio'",
                                    function(data) {
                                        // x轴数据 redo
                                        var snap_time = data[0];
                                        // y轴数据
                                        var value = data[1];
                                        // 更新曲线数据
                                        series_parse.addPoint([snap_time, value], true, true);
                                    });
                                },
                                10 * 1000/*启动间隔，单位ms*/
                                );
                            }
                        }
                    },
                    title: {
                        text: 'Buffer Hit %:',
                        x: -20
                    },
                    xAxis: {
                        type: 'datetime',
                        tickInterval : {{tick}}*3600*1000,
                        labels: {step: 4,overflow:'justify'},
                        type: 'datetime',
                        tickWidth:1,//刻度的宽度
                        lineColor:'#990000',//自定义刻度颜色
                        lineWidth:1,//自定义x轴宽度
                        gridLineWidth:1,//默认是0，即在图上没有纵轴间隔线
                        dateTimeLabelFormats: {
                        second: '%H:%M:%S',
					    minute: '%e. %b %H:%M',
					    hour: '%b/%e %H:%M',
					    day: '%e日/%b',
					    week: '%e. %b',
					    month: '%b %y',
					    year: '%Y'
                            }
                    },
                    yAxis: {
                        title: {
                            text: '命中率'
                        },
                        plotLines: [{
                            value: 0,
                            width: 1,
                            color: '#990000'
                        }],
                        lineWidth:1,
                        lineColor:'#990000',
                        min:0
                    },
                    legend: {
                        align:'center',
                        verticalAlign:'top',
                        x: 100,
                        y: 0,
                    },
                    credits: {
                        enabled: false
                    },
                    series: [
                    // 第1条曲线的(name, data)对
                    {
                        name: '%',
                        data:eval(eval(json_data('buff_hit_ratio')))
                    }
                    ]
                });
            });
//===================================================redo nowait ratio=======================================
        $(function() {
                $('#redo_nowait_ratio').highcharts({
                    chart: {
                        type: 'spline',
                        marginRight: 10,
                        marginLeft: 80,
                        marginBottom: 50,
                        animation: Highcharts.svg,

                        events: {
                            load: function() {
                                var series_parse = this.series[0];
                                setInterval(function() {
                                    jQuery.getJSON('/ora_load_json',"id="+inst_id+"&stat_name='redo_nowait_ratio'",
                                    function(data) {
                                        // x轴数据 redo
                                        var snap_time = data[0];
                                        // y轴数据
                                        var value = data[1];
                                        // 更新曲线数据
                                        series_parse.addPoint([snap_time, value], true, true);
                                    });
                                },
                                10 * 1000/*启动间隔，单位ms*/
                                );
                            }
                        }
                    },
                    title: {
                        text: 'Redo NoWait %:',
                        x: -20
                    },
                    xAxis: {
                        type: 'datetime',
                        tickInterval : {{tick}}*3600*1000,
                        labels: {step: 4,overflow:'justify'},
                        type: 'datetime',
                        tickWidth:1,//刻度的宽度
                        lineColor:'#990000',//自定义刻度颜色
                        lineWidth:1,//自定义x轴宽度
                        gridLineWidth:1,//默认是0，即在图上没有纵轴间隔线
                        dateTimeLabelFormats: {
                        second: '%H:%M:%S',
					    minute: '%e. %b %H:%M',
					    hour: '%b/%e %H:%M',
					    day: '%e日/%b',
					    week: '%e. %b',
					    month: '%b %y',
					    year: '%Y'
                            }
                    },
                    yAxis: {
                        title: {
                            text: '命中率'
                        },
                        plotLines: [{
                            value: 0,
                            width: 1,
                            color: '#990000'
                        }],
                        lineWidth:1,
                        lineColor:'#990000',
                        min:0
                    },
                    legend: {
                        align:'center',
                        verticalAlign:'top',
                        x: 100,
                        y: 0,
                    },
                    credits: {
                        enabled: false
                    },
                    series: [
                    // 第1条曲线的(name, data)对
                    {
                        name: '%',
                        data:eval(eval(json_data('redo_nowait_ratio')))
                    }
                    ]
                });
            });			
//===================================================In-memory Sort=======================================
        $(function() {
                $('#in_memory_sort').highcharts({
                    chart: {
                        type: 'spline',
                        marginRight: 10,
                        marginLeft: 80,
                        marginBottom: 50,
                        animation: Highcharts.svg,

                        events: {
                            load: function() {
                                var series_parse = this.series[0];
                                setInterval(function() {
                                    jQuery.getJSON('/ora_load_json',"id="+inst_id+"&stat_name='in_memory_sort'",
                                    function(data) {
                                        // x轴数据 redo
                                        var snap_time = data[0];
                                        // y轴数据
                                        var value = data[1];
                                        // 更新曲线数据
                                        series_parse.addPoint([snap_time, value], true, true);
                                    });
                                },
                                10 * 1000/*启动间隔，单位ms*/
                                );
                            }
                        }
                    },
                    title: {
                        text: 'in_memory_sort %:',
                        x: -20
                    },
                    xAxis: {
                        type: 'datetime',
                        tickInterval : {{tick}}*3600*1000,
                        labels: {step: 4,overflow:'justify'},
                        type: 'datetime',
                        tickWidth:1,//刻度的宽度
                        lineColor:'#990000',//自定义刻度颜色
                        lineWidth:1,//自定义x轴宽度
                        gridLineWidth:1,//默认是0，即在图上没有纵轴间隔线
                        dateTimeLabelFormats: {
                        second: '%H:%M:%S',
					    minute: '%e. %b %H:%M',
					    hour: '%b/%e %H:%M',
					    day: '%e日/%b',
					    week: '%e. %b',
					    month: '%b %y',
					    year: '%Y'
                            }
                    },
                    yAxis: {
                        title: {
                            text: 'in_memory_sort'
                        },
                        plotLines: [{
                            value: 0,
                            width: 1,
                            color: '#990000'
                        }],
                        lineWidth:1,
                        lineColor:'#990000',
                        min:0
                    },
                    legend: {
                        align:'center',
                        verticalAlign:'top',
                        x: 100,
                        y: 0,
                    },
                    credits: {
                        enabled: false
                    },
                    series: [
                    // 第1条曲线的(name, data)对
                    {
                        name: '%',
                        data:eval(eval(json_data('in_memory_sort')))
                    }
                    ]
                });
            });	
//===================================================library_hit=======================================
        $(function() {
                $('#library_hit').highcharts({
                    chart: {
                        type: 'spline',
                        marginRight: 10,
                        marginLeft: 80,
                        marginBottom: 50,
                        animation: Highcharts.svg,

                        events: {
                            load: function() {
                                var series_parse = this.series[0];
                                setInterval(function() {
                                    jQuery.getJSON('/ora_load_json',"id="+inst_id+"&stat_name='library_hit'",
                                    function(data) {
                                        // x轴数据 redo
                                        var snap_time = data[0];
                                        // y轴数据
                                        var value = data[1];
                                        // 更新曲线数据
                                        series_parse.addPoint([snap_time, value], true, true);
                                    });
                                },
                                10 * 1000/*启动间隔，单位ms*/
                                );
                            }
                        }
                    },
                    title: {
                        text: 'library_hit %:',
                        x: -20
                    },
                    xAxis: {
                        type: 'datetime',
                        tickInterval : {{tick}}*3600*1000,
                        labels: {step: 4,overflow:'justify'},
                        type: 'datetime',
                        tickWidth:1,//刻度的宽度
                        lineColor:'#990000',//自定义刻度颜色
                        lineWidth:1,//自定义x轴宽度
                        gridLineWidth:1,//默认是0，即在图上没有纵轴间隔线
                        dateTimeLabelFormats: {
                        second: '%H:%M:%S',
					    minute: '%e. %b %H:%M',
					    hour: '%b/%e %H:%M',
					    day: '%e日/%b',
					    week: '%e. %b',
					    month: '%b %y',
					    year: '%Y'
                            }
                    },
                    yAxis: {
                        title: {
                            text: 'library_hit'
                        },
                        plotLines: [{
                            value: 0,
                            width: 1,
                            color: '#990000'
                        }],
                        lineWidth:1,
                        lineColor:'#990000',
                        min:0
                    },
                    legend: {
                        align:'center',
                        verticalAlign:'top',
                        x: 100,
                        y: 0,
                    },
                    credits: {
                        enabled: false
                    },
                    series: [
                    // 第1条曲线的(name, data)对
                    {
                        name: '%',
                        data:eval(eval(json_data('library_hit')))
                    }
                    ]
                });
            });				
//===================================================soft_parse_pct====================================================================
        $(function() {
                $('#soft_parse_pct').highcharts({
                    chart: {
                        type: 'spline',
                        marginRight: 10,
                        marginLeft: 80,
                        marginBottom: 50,
                        animation: Highcharts.svg,

                        events: {
                            load: function() {
                                var series_parse = this.series[0];
                                setInterval(function() {
                                    jQuery.getJSON('/ora_load_json',"id="+inst_id+"&stat_name='soft_parse_pct'",
                                    function(data) {
                                        // x轴数据 redo
                                        var snap_time = data[0];
                                        // y轴数据
                                        var value = data[1];
                                        // 更新曲线数据
                                        series_parse.addPoint([snap_time, value], true, true);
                                    });
                                },
                                10 * 1000/*启动间隔，单位ms*/
                                );
                            }
                        }
                    },
                    title: {
                        text: 'soft parse %:',
                        x: -20
                    },
                    xAxis: {
                        type: 'datetime',
                        tickInterval : {{tick}}*3600*1000,
                        labels: {step: 4,overflow:'justify'},
                        type: 'datetime',
                        tickWidth:1,//刻度的宽度
                        lineColor:'#990000',//自定义刻度颜色
                        lineWidth:1,//自定义x轴宽度
                        gridLineWidth:1,//默认是0，即在图上没有纵轴间隔线
                        dateTimeLabelFormats: {
                        second: '%H:%M:%S',
					    minute: '%e. %b %H:%M',
					    hour: '%b/%e %H:%M',
					    day: '%e日/%b',
					    week: '%e. %b',
					    month: '%b %y',
					    year: '%Y'
                            }
                    },
                    yAxis: {
                        title: {
                            text: 'soft_parse %'
                        },
                        plotLines: [{
                            value: 0,
                            width: 1,
                            color: '#990000'
                        }],
                        lineWidth:1,
                        lineColor:'#990000',
                        min:0
                    },
                    legend: {
                        align:'center',
                        verticalAlign:'top',
                        x: 100,
                        y: 0,
                    },
                    credits: {
                        enabled: false
                    },
                    series: [
                    // 第1条曲线的(name, data)对
                    {
                        name: '%',
                        data:eval(eval(json_data('soft_parse_pct')))
                    }
                    ]
                });
            });			
//===================================================exec_to_parse_ratio====================================================================
        $(function() {
                $('#exec_to_parse_ratio').highcharts({
                    chart: {
                        type: 'spline',
                        marginRight: 10,
                        marginLeft: 80,
                        marginBottom: 50,
                        animation: Highcharts.svg,

                        events: {
                            load: function() {
                                var series_parse = this.series[0];
                                setInterval(function() {
                                    jQuery.getJSON('/ora_load_json',"id="+inst_id+"&stat_name='exec_to_parse_ratio'",
                                    function(data) {
                                        // x轴数据 redo
                                        var snap_time = data[0];
                                        // y轴数据
                                        var value = data[1];
                                        // 更新曲线数据
                                        series_parse.addPoint([snap_time, value], true, true);
                                    });
                                },
                                10 * 1000/*启动间隔，单位ms*/
                                );
                            }
                        }
                    },
                    title: {
                        text: 'exec to parse %:',
                        x: -20
                    },
                    xAxis: {
                        type: 'datetime',
                        tickInterval : {{tick}}*3600*1000,
                        labels: {step: 4,overflow:'justify'},
                        type: 'datetime',
                        tickWidth:1,//刻度的宽度
                        lineColor:'#990000',//自定义刻度颜色
                        lineWidth:1,//自定义x轴宽度
                        gridLineWidth:1,//默认是0，即在图上没有纵轴间隔线
                        dateTimeLabelFormats: {
                        second: '%H:%M:%S',
					    minute: '%e. %b %H:%M',
					    hour: '%b/%e %H:%M',
					    day: '%e日/%b',
					    week: '%e. %b',
					    month: '%b %y',
					    year: '%Y'
                            }
                    },
                    yAxis: {
                        title: {
                            text: 'exec to parse %'
                        },
                        plotLines: [{
                            value: 0,
                            width: 1,
                            color: '#990000'
                        }],
                        lineWidth:1,
                        lineColor:'#990000',
                        min:0
                    },
                    legend: {
                        align:'center',
                        verticalAlign:'top',
                        x: 100,
                        y: 0,
                    },
                    credits: {
                        enabled: false
                    },
                    series: [
                    // 第1条曲线的(name, data)对
                    {
                        name: '%',
                        data:eval(eval(json_data('exec_to_parse_ratio')))
                    }
                    ]
                });
            });					
        </script>
		<style type="text/css">
			#herf{	
				color:blue;
			}
            #title{
                margin:2px;
            }
		</style>
    <!--<script type="text/javascript" src="../static/Scripts/tb.js"></script> -->
</head>
<body link="red">
    <div class="alert alert-info" id="title">
				<b class="tip"></b>ORACLE监控<b class="tip"></b>负载监控<b class="tip"></b>{{tag}}
				&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				<a href="/ora_load_detail?inst_id={{inst_id}}&period=1"><b><span id="herf">1小时内</span></b></a>
				&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				<a href="/ora_load_detail?inst_id={{inst_id}}&period=24"><b><span id="herf">1天内</span></b></a>
				&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				<a href="/ora_load_detail?inst_id={{inst_id}}&period=168"><b><span id="herf">1周内</span></b></a>
				&nbsp;&nbsp;&nbsp;&nbsp; <b>自定义查询:&nbsp;&nbsp;&nbsp;&nbsp;</b>
               <form style="margin:0px;display:inline" action="/ora_load_detail" method="POST" id="dateform">
                    <input placeholder="请输入起始日期" name="begin_date" class="laydate-icon" onclick="laydate({istime: true, format: 'YYYY-MM-DD hh:mm:ss'})">
                    &nbsp;&nbsp;<input placeholder="请输入结束日期" name="end_date" class="laydate-icon" onclick="laydate({istime: true, format: 'YYYY-MM-DD hh:mm:ss'})">
                   &nbsp;&nbsp;<input type="submit" style="display:inline" value="查询"/>
                   <input type="hidden" name="inst_id" value={{inst_id}}>
               </form>
	</div>

<div>
  <input class="input" id="tab1" type="radio" name="tabs" checked>
  <label for="tab1">数据库负载</label>
  <input class="input" id="tab2" type="radio" name="tabs">
  <label for="tab2">RAC负载</label>
  <input class="input" id="tab3" type="radio" name="tabs">
  <label for="tab3">SGA命中率</label>
  <input class="input" id="tab4" type="radio" name="tabs">
  <label for="tab4">PGA命中率</label>
  <section id="content1" class="input">
	<div>
        <div id="lio" style="height:300px; width:50%; float:left;"></div>
        <div id="redo" style="height:300px; width:50%; float:left"></div>
        <div id="exec" style="height:300px; width:50%; float:left"></div>
        <div id="pio" style="height:300px; width:50%; float:left"></div>
        <div id="pwr" style="height:300px; width:50%; float:left"></div>
	    <div id="parse" style="height:300px; width:50%; float:left"></div>
    </div>
     </section>
  <section id="content2" class="input">
    非RAC数据库
  </section>
  <section id="content3" class="input">
    <div id="buff_hit_ratio" style="height:300px; width:50%; float:left"></div>
	<div id="redo_nowait_ratio" style="height:300px; width:50%; float:left"></div>
	<div id="in_memory_sort" style="height:300px; width:50%; float:left"></div>
	<div id="library_hit" style="height:300px; width:50%; float:left"></div>
	<div id="soft_parse_pct" style="height:300px; width:50%; float:left"></div>
	<div id="exec_to_parse_ratio" style="height:300px; width:50%; float:left"></div>
  </section>
  <section id="content4" class="input">
  </section>
</div>
</body>
</html>














